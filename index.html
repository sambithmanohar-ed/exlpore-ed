<!doctype html>
<html lang="en">
<head>
  <head>
  …
  <link rel="icon" href="/favicon.ico">
  <meta name="theme-color" content="#0c1720">

  <!-- Stop iOS from probing missing Apple Touch icons -->
  <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAuMB9qu1lFIAAAAASUVORK5CYII=">
  <link rel="apple-touch-icon-precomposed" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAuMB9qu1lFIAAAAASUVORK5CYII=">
  …
</head>

<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Brain Explorer</title>
<meta name="description" content="Student-friendly neuroscience with lessons, quizzes, flashcards, an interactive brain map, and more."/>
<link rel="icon" href="/favicon.ico">
<meta name="theme-color" content="#0c1720">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FR9MV097J4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FR9MV097J4');
</script>

<style>
/* ========= SERENE TEAL GLOW (refined) ========= */
:root{
  --bg-0:#071018; --bg-1:#0b1620;
  --panel:#0e1d28; --panel-2:#0f2330;
  --border:#183445; --text:#e8f4f7; --muted:#9fc2cf;
  --mint:#2ee6b5; --teal:#32d3d3;
  --warning:#f59e0b; --danger:#f87171;
  --radius:18px;
  --shadow:0 16px 40px rgba(13,203,185,.12), inset 0 0 0 1px rgba(22,165,165,.16);
  --glow:0 0 0 2px rgba(46,230,181,.25), 0 12px 30px rgba(12,210,210,.18);
}
*{box-sizing:border-box}
html,body{height:100%}
html{ background-color: var(--bg-1); } /* prevents overscroll banding on iOS */

body{
  <div class="page-glow" aria-hidden="true"></div>
  margin:0;
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue",Arial;
  color:var(--text);
  /* solid, non-scrolling base: no gradients here */
  background-color: var(--bg-1);
}
/* Fixed, GPU-friendly glow behind everything (no attachment:fixed on body) */
/* Fixed overlay glows + hard fade to black after 60vh */
.page-glow{
  position:fixed;
  inset:0;
  z-index:-1;
  pointer-events:none;

  /* TOPMOST layer: makes everything after 60vh completely black */
  background:
    linear-gradient(to bottom,
      rgba(0,0,0,0) 0,
      rgba(0,0,0,0) 60vh,   /* change this cutoff if you like */
      #000 60vh,
      #000 100%),

    /* Decorative corner glows under the fade */
    radial-gradient(1200px 800px at 10% -10%, rgba(16,52,74,.85) 0%, rgba(16,52,74,0) 60%),
    radial-gradient(1000px 900px at 110% 0%, rgba(10,39,48,.80) 0%, rgba(10,39,48,0) 60%);

  background-repeat:no-repeat, no-repeat, no-repeat;
  background-position: top left, top left, top right;

  /* Jank guards */
  will-change: opacity, transform;
  backface-visibility:hidden;
  transform: translateZ(0);
}



a{color:var(--teal);text-decoration:none}
small,.small{font-size:12px;color:var(--muted)}
header{position:sticky;top:0;z-index:50;background:rgba(7,16,24,.6);backdrop-filter:blur(6px);border-bottom:1px solid var(--border)}
.container{max-width:1120px;margin:0 auto;padding:18px}
.nav{display:flex;align-items:center;justify-content:space-between;gap:16px}
.brand{display:flex;align-items:center;gap:10px;font-weight:800}
.logo{width:36px;height:36px;border-radius:12px;background:radial-gradient(120% 120% at 30% 20%, var(--mint), #5b7cfa);box-shadow:var(--glow)}
.tabs{display:flex;gap:10px;flex-wrap:wrap}
.tab-btn{padding:8px 12px;border-radius:999px;background:var(--panel);border:1px solid var(--border);color:#cfe9ee;cursor:pointer}
.tab-btn.active{background:linear-gradient(135deg,#0c2130,#112b3a);border-color:#205364;box-shadow:inset 0 0 0 1px #1dddbf}
main{padding:30px 18px}
.grid{display:grid;gap:18px;grid-template-columns:repeat(12,1fr)}
.card{grid-column:span 12;background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
@media(min-width:820px){
  .span-3{grid-column:span 3}.span-4{grid-column:span 4}.span-5{grid-column:span 5}
  .span-6{grid-column:span 6}.span-7{grid-column:span 7}.span-8{grid-column:span 8}.span-12{grid-column:span 12}
}
.pill{display:inline-block;background:#0f2a33;border:1px solid #194757;color:#86e6e6;border-radius:999px;padding:4px 10px;font-size:12px}
.btn{appearance:none;border:0;padding:10px 14px;border-radius:12px;background:linear-gradient(135deg,var(--mint),var(--teal));color:#06292b;font-weight:800;cursor:pointer;box-shadow:var(--glow)}
.btn.secondary{background:#102834;color:#cfe9ee;border:1px solid #1a4554;box-shadow:none}
.row{display:flex;gap:12px;flex-wrap:wrap}

/* ========== HOME: “Topics” uniform + pretty ========== */
.even-four{display:grid;gap:14px;grid-template-columns:repeat(2,1fr)}
@media(min-width:860px){.even-four{grid-template-columns:repeat(4,1fr)}}
.topic{
  display:flex;flex-direction:column;align-items:center;justify-content:space-between;
  min-height:180px;border-radius:16px;border:1px solid var(--border);
  background:
    radial-gradient(400px 240px at 50% -10%, #123244 0%, transparent 60%),
    var(--panel-2);
  padding:16px;text-align:center;transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.topic h4{margin:6px 0 4px}
.topic p{margin:0;color:var(--muted)}
.topic .tag{margin-top:8px}
.topic:hover{transform:translateY(-3px);border-color:#1dddbf;box-shadow:0 12px 30px rgba(12,210,210,.1), inset 0 0 0 1px rgba(46,230,181,.2)}

/* ========== Flashcards teaser (fix back centering) ========== */
.teaser{display:grid;gap:12px;grid-template-columns:repeat(1,minmax(0,1fr))}
@media(min-width:700px){.teaser{grid-template-columns:repeat(3,1fr)}}
.miniCard{
  display:grid; place-items:center; text-align:center; line-height:1.3;
  min-height:84px; padding:10px 12px; border-radius:16px;
  border:1px solid var(--border); background:#0e2531; box-shadow:var(--shadow); font-weight:700;
}

/* full set: ensure BOTH sides centered */
.fc-card{ display:flex; align-items:center; justify-content:center; min-height:120px; text-align:center; cursor:pointer; }

/* ========== Learn blocks + smooth page backdrop ========== */
#learn{
  background:linear-gradient(180deg,#0b1b24 0%, #0b1f2a 100%);
  border:1px solid var(--border);
  border-radius:18px;
  padding:18px;
  margin-bottom:18px;
}
.learn-block{
  padding:26px;border-radius:18px;margin-bottom:22px;background:
    radial-gradient(700px 400px at 10% -20%, #0d2a39 0%, transparent 60%),
    var(--panel);
}
.learn-block h4{margin:0 0 10px}
.learn-block p{color:#cfe9ee;line-height:1.7}
.learn-block ul{margin:12px 0 0 18px}
.learn-cta{margin-top:18px;display:flex;justify-content:flex-end}

/* ========== Quiz spacing tweak ========== */
.quiz-tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px}
.quiz-tabs button{padding:8px 12px;border-radius:10px;border:1px solid var(--border);background:#0f2a33;color:#d7f1f3}
.quiz-tabs button.active{background:#123645;border-color:#1dddbf}
.quiz-q{margin:12px 0 18px}
.q-actions{margin-top:16px;display:flex;gap:10px}
.result{margin-top:6px}

/* ========== Diagram ========== */
.diagram{padding:12px;border:1px solid var(--border);border-radius:18px;background:linear-gradient(180deg,#0b1b24,#0b1f2a)}
.diagram .info{margin-top:8px;color:#bfe2ea}

/* ========== Resources (nicer cards + bigger text) ========== */
.res-grid{display:grid;gap:14px;grid-template-columns:repeat(1,1fr)}
@media(min-width:860px){.res-grid{grid-template-columns:repeat(4,1fr)}}
.res-col{display:flex;flex-direction:column;justify-content:space-between;min-height:200px}
.res-col h4{margin:0 0 6px}
.res-col p{font-size:14px;line-height:1.6}
.res-col .btn{margin-top:auto;width:max-content}

/* Footer */
footer{padding:28px 18px;border-top:1px solid var(--border);color:#9cc4cf}

/* Reviews — tidy layout & spacing */
/* ---------- Reviews form: dark inputs + tidy spacing ---------- */
.review-form{
  display:flex; flex-direction:column; gap:10px; margin-top:10px;
}
.review-form input,
.review-form textarea{
  width:100%;
  font: inherit;
  color: var(--text);
  background:#0f2430;                /* dark field */
  border:1px solid var(--border);     /* subtle border */
  border-radius:12px;
  padding:10px 12px;
  outline:none;
  transition:border-color .15s ease, box-shadow .15s ease;
}
.review-form textarea{
  min-height:110px; resize:vertical; line-height:1.5;
}
.review-form input::placeholder,
.review-form textarea::placeholder{
  color:#7ea2ad;                      /* muted placeholder */
}
.review-form input:focus,
.review-form textarea:focus{
  border-color:#1dddbf;
  box-shadow:0 0 0 2px rgba(46,230,181,.25); /* soft glow focus */
}

/* Button already uses .btn; give it some breathing room */
.review-form .btn{ align-self:flex-start; }

/* Optional: nicer system autofill on Chrome */
.review-form input:-webkit-autofill,
.review-form textarea:-webkit-autofill{
  -webkit-text-fill-color: var(--text);
  -webkit-box-shadow: 0 0 0px 1000px #0f2430 inset;
  caret-color: var(--text);
}

/* Loading / empty / error line */
.reviews-wrap .state{
  color:#86aeb8; font-size:13px; padding:6px 0;
}

.reviews-wrap{ display:flex; flex-direction:column; gap:12px; }
.review{
  border:1px solid var(--border);
  background:#0f2430;
  border-radius:14px;
  padding:12px;
}
.review-text{
  margin:0 0 6px;
  line-height:1.55;
  white-space:pre-wrap;      /* keep user line breaks */
  word-break:break-word;     /* avoid overflow */
}
.review-meta{ display:block; color:#86aeb8; }



/* ========== Home: teacher + what you'll learn (shorter copy + bigger) ========== */
.teacher-blurb{font-size:15px;line-height:1.55}
.learn-points{font-size:15px}
</style>
</head>
<body>
<header>
  <div class="container nav">
    <div class="brand"><div class="logo"></div><span>Brain Explorer</span></div>
    <div class="tabs" role="tablist">
      <button class="tab-btn" data-tab="home">Home</button>
      <button class="tab-btn" data-tab="learn">Learn</button>
      <button class="tab-btn" data-tab="quiz">Quizzes</button>
      <button class="tab-btn" data-tab="flash">Flashcards</button>
      <button class="tab-btn" data-tab="interactive">Interactive</button>
      <button class="tab-btn" data-tab="resources">Resources</button>
      <button class="tab-btn" data-tab="about">About</button>
    </div>
  </div>
</header>

<main class="container">
  <!-- ========== HOME ========== -->
  <section id="home">
    <div class="grid">
      <div class="card span-8">
        <span class="pill">Neuroscience for students</span>
        <h1 style="margin:8px 0 10px">Understand your brain — memory, attention, emotion, & more.</h1>
        <p class="small">Fast, visual lessons with mini-quizzes and an interactive brain map. Built for middle/high school learners.</p>
        <div class="row" style="margin:12px 0 8px">
          <button class="btn" data-nav="learn">Start learning</button>
          <button class="btn secondary" data-nav="quiz">Try a quiz</button>
        </div>

        <h3 style="margin:16px 0 8px">Topics</h3>
        <div class="even-four">
          <a class="topic" href="#learn">
            <div>
              <h4>Parts of the brain</h4>
              <p>What key parts do in daily life.</p>
            </div>
            <span class="small tag">8 core regions</span>
          </a>
          <a class="topic" href="#learn">
            <div>
              <h4>Memory types</h4>
              <p>Working, episodic, semantic, procedural.</p>
            </div>
            <span class="small tag">with examples</span>
          </a>
          <a class="topic" href="#learn">
            <div>
              <h4>Neurotransmitters</h4>
              <p>Dopamine, serotonin, acetylcholine, GABA.</p>
            </div>
            <span class="small tag">signals & effects</span>
          </a>
          <a class="topic" href="#learn">
            <div>
              <h4>Sleep</h4>
              <p>NREM vs REM, circadian rhythm, better recall.</p>
            </div>
            <span class="small tag">study smarter</span>
          </a>
        </div>

        <div class="card" style="margin-top:16px">
          <h3>Flashcards preview</h3>
          <div class="teaser" id="teaser"></div>
          <div class="row" style="margin-top:10px">
            <a class="btn" href="#flash">Open full set</a>
            <button class="btn secondary" id="shuffleTeaser">Shuffle</button>
          </div>
          <p class="small">Click a card to flip.</p>
        </div>

        <div class="grid" style="margin-top:16px">
          <div class="card span-6">
            <h3>Teacher corner</h3>
            <p class="teacher-blurb">Printable worksheet + answer key. Covers major parts, memory systems, neurotransmitters, and sleep. Perfect for a 20–30 min class with quick checks.</p>
            <div class="row" style="margin-top:8px">
              <a class="btn" href="/brain-basics-worksheet.pdf" download>Worksheet (PDF)</a>
              <a class="btn secondary" href="/brain-basics-answer-key.pdf" download>Answer key</a>
            </div>
          </div>

          <div class="card span-6">
            <h3>What you’ll learn</h3>
            <ul class="learn-points" style="margin:8px 0 0 18px">
              <li>Spot roles of major parts in everyday tasks.</li>
              <li>Explain memory types with vivid examples.</li>
              <li>Connect transmitters to behavior (motivation, focus).</li>
              <li>Use sleep strategies to remember more.</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="card span-4">
        <h3>Today’s quick facts</h3>
        <ul id="factsList" class="small" style="margin-left:18px"></ul>
        <p class="small" id="factsStamp"></p>

        <div class="card" style="margin-top:12px">
          <h4 style="margin:0 0 6px">Reviews</h4>
         <div id="homeReviews" class="reviews-wrap" aria-live="polite">
            <div class="state">Loading reviews…</div>
         </div>
          <form id="reviewForm" class="review-form" autocomplete="on">
            <input id="revName" placeholder="Your name (optional)" />
            <textarea id="revText" placeholder="Write a short review…"></textarea>
            <button class="btn" type="submit">Post review</button>
          </form>
          <p class="small">The first reviews that fit are shown here. All reviews appear on the About page.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ========== LEARN (expanded content) ========== -->
  <section id="learn">
    <div class="learn-block">
      <h4>Parts of the brain</h4>
      <p>The brain is a team sport. The <b>frontal lobe</b> plans, decides, and speaks (Broca’s area) — it is your executive controller. The <b>parietal lobe</b> builds maps of touch and space so you can judge distance, track objects, and coordinate attention. The <b>temporal lobe</b> decodes sound and language (Wernicke’s area) and interacts with the hippocampus for memory. The <b>occipital lobe</b> is the visual headquarters, detecting edges, color, and motion.</p>
      <p>Deeper structures add specialized power: the <b>hippocampus</b> forms new episodic memories and organizes spatial maps; the <b>amygdala</b> tags emotional significance and speeds quick reactions; the <b>cerebellum</b> fine-tunes timing, balance, and skill learning; and the <b>brainstem</b> keeps vital functions running (breathing, heart rate, arousal). These regions constantly exchange signals so a simple task — like catching a ball — recruits vision (occipital), prediction and control (frontal/cerebellum), attention to space (parietal), and quick error-correction (cerebellum/brainstem).</p>
      <ul>
        <li><b>Everyday example:</b> Parallel parking uses parietal maps + cerebellum timing while the frontal lobe keeps attention on mirrors and pedals.</li>
        <li><b>Damage example:</b> Stroke in Broca’s area → effortful speech with good understanding (expressive aphasia).</li>
      </ul>
      <div class="learn-cta"><a class="btn" href="#quiz" data-quiz="parts">Take the quiz</a></div>
    </div>

    <div class="learn-block">
      <h4>Memory types</h4>
      <p><b>Working memory</b> is your short-term scratchpad for holding a phone number or juggling steps in a math problem. <b>Episodic memory</b> stores life’s events with time and place and depends strongly on the hippocampus. <b>Semantic memory</b> captures facts and meanings. <b>Procedural memory</b> encodes skills and habits — riding a bike, typing, or playing scales — often relying on the cerebellum and basal ganglia.</p>
      <p>Strong memories come from <b>retrieval practice</b> (testing yourself), <b>spacing</b> (study over days), and <b>interleaving</b> related skills. Emotions can boost consolidation; distraction harms working memory. Sleep (deep NREM and REM) stabilizes and integrates what you learned.</p>
      <ul>
        <li><b>Study recipe:</b> 3 short quizzes across a week &gt; 1 long cram session.</li>
        <li><b>Mixing helps:</b> Interleave similar problems (fractions + decimals) to strengthen discrimination.</li>
      </ul>
      <div class="learn-cta"><a class="btn" href="#quiz" data-quiz="memory">Take the quiz</a></div>
    </div>

    <div class="learn-block">
      <h4>Neurotransmitters</h4>
      <p>Neurons talk using chemical messengers. <b>Dopamine</b> signals motivation and reward prediction — spikes when outcomes are better than expected, helping you learn what to repeat. <b>Serotonin</b> helps regulate mood, sleep, and appetite. <b>Acetylcholine</b> supports attention and plasticity in cortex and is the transmitter at the neuromuscular junction. <b>GABA</b> is the main inhibitory transmitter: it calms over-excited circuits and allows precise timing.</p>
      <p>Many medicines work by changing transmitter levels or receptor effects. For instance, benzodiazepines enhance GABA’s inhibition; some ADHD treatments boost dopamine and norepinephrine to improve focus; Alzheimer’s drugs often target acetylcholine to support learning.</p>
      <ul>
        <li><b>Prediction error:</b> Unexpected praise after a tough task → dopamine burst → quicker habit formation.</li>
      </ul>
      <div class="learn-cta"><a class="btn" href="#quiz" data-quiz="nt">Take the quiz</a></div>
    </div>

    <div class="learn-block">
      <h4>Sleep</h4>
      <p>Sleep is not “off” — it is an active training ground. <b>NREM (deep) sleep</b> stabilizes and strengthens fresh memories. <b>REM sleep</b> links ideas, supports emotional processing, and can spark creative solutions. Your <b>circadian rhythm</b> is a ~24-hour clock set mainly by light; consistent timing, daylight in the morning, and a cool, dark room help you fall asleep faster and wake refreshed.</p>
      <ul>
        <li><b>Before bed:</b> Stop heavy studying ~30–60 min before sleep; do a quick retrieval quiz instead.</li>
        <li><b>Power nap:</b> 10–20 minutes can restore alertness without grogginess.</li>
      </ul>
      <div class="learn-cta"><a class="btn" href="#quiz" data-quiz="sleep">Take the quiz</a></div>
    </div>
  </section>

  <!-- ========== QUIZZES (unchanged content) ========== -->
  <section id="quiz">
    <div class="card">
      <h3>Quizzes</h3>
      <div class="quiz-tabs">
        <button data-qtab="parts" class="active">Parts of the brain</button>
        <button data-qtab="memory">Memory types</button>
        <button data-qtab="nt">Neurotransmitters</button>
        <button data-qtab="sleep">Sleep</button>
      </div>
      <!-- Parts -->
      <form class="qform" id="q_parts">
        <div class="quiz-q"><h4>1) Which lobe primarily processes vision?</h4>
          <label><input type="radio" name="p1" value="Frontal"> Frontal</label><br>
          <label><input type="radio" name="p1" value="Occipital"> Occipital</label><br>
          <label><input type="radio" name="p1" value="Parietal"> Parietal</label><br>
          <label><input type="radio" name="p1" value="Temporal"> Temporal</label>
          <div class="result" data-for="p1"></div></div>

        <div class="quiz-q"><h4>2) The hippocampus is crucial for:</h4>
          <label><input type="radio" name="p2" value="Balance"> Balance/timing</label><br>
          <label><input type="radio" name="p2" value="New memories"> Forming new memories</label><br>
          <label><input type="radio" name="p2" value="Vision"> Vision</label><br>
          <label><input type="radio" name="p2" value="Breathing"> Breathing control</label>
          <div class="result" data-for="p2"></div></div>

        <div class="quiz-q"><h4>3) Which structure keeps vital functions running automatically?</h4>
          <label><input type="radio" name="p3" value="Cerebellum"> Cerebellum</label><br>
          <label><input type="radio" name="p3" value="Brainstem"> Brainstem</label><br>
          <label><input type="radio" name="p3" value="Amygdala"> Amygdala</label><br>
          <label><input type="radio" name="p3" value="Frontal"> Frontal lobe</label>
          <div class="result" data-for="p3"></div></div>

        <div class="quiz-q"><h4>4) Matching the function to the lobe: hearing & language comprehension belongs to…</h4>
          <label><input type="radio" name="p4" value="Temporal"> Temporal lobe</label><br>
          <label><input type="radio" name="p4" value="Parietal"> Parietal lobe</label><br>
          <label><input type="radio" name="p4" value="Occipital"> Occipital lobe</label><br>
          <label><input type="radio" name="p4" value="Frontal"> Frontal lobe</label>
          <div class="result" data-for="p4"></div></div>

        <div class="quiz-q"><h4>5) Which structure best fine-tunes timing for skilled movement?</h4>
          <label><input type="radio" name="p5" value="Cerebellum"> Cerebellum</label><br>
          <label><input type="radio" name="p5" value="Hippocampus"> Hippocampus</label><br>
          <label><input type="radio" name="p5" value="Amygdala"> Amygdala</label><br>
          <label><input type="radio" name="p5" value="Temporal"> Temporal lobe</label>
          <div class="result" data-for="p5"></div></div>

        <div class="q-actions"><button class="btn" type="submit">Check answers</button>
          <button class="btn secondary" type="button" data-reset="q_parts">Reset</button></div>
        <p class="small">Best score: <span data-best="q_parts">—</span></p>
      </form>

      <!-- Memory -->
      <form class="qform" id="q_memory" style="display:none">
        <div class="quiz-q"><h4>1) Working memory is best described as:</h4>
          <label><input type="radio" name="m1" value="workspace"> A short-term mental workspace</label><br>
          <label><input type="radio" name="m1" value="facts"> A store of facts</label><br>
          <label><input type="radio" name="m1" value="skills"> Skills/habits</label><br>
          <label><input type="radio" name="m1" value="events"> Personal events</label>
          <div class="result" data-for="m1"></div></div>

        <div class="quiz-q"><h4>2) Episodic memory stores:</h4>
          <label><input type="radio" name="m2" value="events"> Personal events with time/place</label><br>
          <label><input type="radio" name="m2" value="facts"> Word meanings & facts</label><br>
          <label><input type="radio" name="m2" value="skills"> Motor programs</label><br>
          <label><input type="radio" name="m2" value="workspace"> Scratchpad items</label>
          <div class="result" data-for="m2"></div></div>

        <div class="quiz-q"><h4>3) Procedural memory is MOST like:</h4>
          <label><input type="radio" name="m3" value="bike"> Riding a bike</label><br>
          <label><input type="radio" name="m3" value="capital"> Capital of France</label><br>
          <label><input type="radio" name="m3" value="party"> Your birthday party last year</label><br>
          <label><input type="radio" name="m3" value="digits"> Holding digits briefly</label>
          <div class="result" data-for="m3"></div></div>

        <div class="quiz-q"><h4>4) Which habit most strengthens long-term retention?</h4>
          <label><input type="radio" name="m4" value="spacing"> Spacing & retrieval practice</label><br>
          <label><input type="radio" name="m4" value="cram"> Cramming once</label><br>
          <label><input type="radio" name="m4" value="re_read"> Re-reading only</label><br>
          <label><input type="radio" name="m4" value="noise"> Multitasking with music</label>
          <div class="result" data-for="m4"></div></div>

        <div class="quiz-q"><h4>5) Semantic memory primarily stores:</h4>
          <label><input type="radio" name="m5" value="facts"> Facts/knowledge</label><br>
          <label><input type="radio" name="m5" value="events"> Events</label><br>
          <label><input type="radio" name="m5" value="skills"> Skills</label><br>
          <label><input type="radio" name="m5" value="workspace"> Scratchpad items</label>
          <div class="result" data-for="m5"></div></div>

        <div class="q-actions"><button class="btn" type="submit">Check answers</button>
          <button class="btn secondary" type="button" data-reset="q_memory">Reset</button></div>
        <p class="small">Best score: <span data-best="q_memory">—</span></p>
      </form>

      <!-- NTs -->
      <form class="qform" id="q_nt" style="display:none">
        <div class="quiz-q"><h4>1) Which transmitter is mainly inhibitory?</h4>
          <label><input type="radio" name="n1" value="GABA"> GABA</label><br>
          <label><input type="radio" name="n1" value="Dopamine"> Dopamine</label><br>
          <label><input type="radio" name="n1" value="ACh"> Acetylcholine</label><br>
          <label><input type="radio" name="n1" value="Serotonin"> Serotonin</label>
          <div class="result" data-for="n1"></div></div>

        <div class="quiz-q"><h4>2) Which supports attention and learning?</h4>
          <label><input type="radio" name="n2" value="ACh"> Acetylcholine</label><br>
          <label><input type="radio" name="n2" value="Serotonin"> Serotonin</label><br>
          <label><input type="radio" name="n2" value="GABA"> GABA</label><br>
          <label><input type="radio" name="n2" value="Dopamine"> Dopamine</label>
          <div class="result" data-for="n2"></div></div>

        <div class="quiz-q"><h4>3) A surprise better-than-expected outcome most increases:</h4>
          <label><input type="radio" name="n3" value="Dopamine"> Dopamine firing</label><br>
          <label><input type="radio" name="n3" value="Serotonin"> Serotonin release</label><br>
          <label><input type="radio" name="n3" value="ACh"> Acetylcholine</label><br>
          <label><input type="radio" name="n3" value="GABA"> GABA</label>
          <div class="result" data-for="n3"></div></div>

        <div class="quiz-q"><h4>4) Benzodiazepines reduce anxiety mainly by enhancing:</h4>
          <label><input type="radio" name="n4" value="GABA"> GABA</label><br>
          <label><input type="radio" name="n4" value="Dopamine"> Dopamine</label><br>
          <label><input type="radio" name="n4" value="ACh"> Acetylcholine</label><br>
          <label><input type="radio" name="n4" value="Serotonin"> Serotonin</label>
          <div class="result" data-for="n4"></div></div>

        <div class="quiz-q"><h4>5) Low levels of which transmitter can disturb sleep and appetite?</h4>
          <label><input type="radio" name="n5" value="Serotonin"> Serotonin</label><br>
          <label><input type="radio" name="n5" value="Dopamine"> Dopamine</label><br>
          <label><input type="radio" name="n5" value="GABA"> GABA</label><br>
          <label><input type="radio" name="n5" value="ACh"> Acetylcholine</label>
          <div class="result" data-for="n5"></div></div>

        <div class="q-actions"><button class="btn" type="submit">Check answers</button>
          <button class="btn secondary" type="button" data-reset="q_nt">Reset</button></div>
        <p class="small">Best score: <span data-best="q_nt">—</span></p>
      </form>

      <!-- Sleep -->
      <form class="qform" id="q_sleep" style="display:none">
        <div class="quiz-q"><h4>1) Deep NREM sleep mainly helps:</h4>
          <label><input type="radio" name="s1" value="stabilize"> Stabilize & consolidate memories</label><br>
          <label><input type="radio" name="s1" value="motor"> Only motor skills</label><br>
          <label><input type="radio" name="s1" value="erase"> Erase weak memories entirely</label><br>
          <label><input type="radio" name="s1" value="none"> Has no learning effect</label>
          <div class="result" data-for="s1"></div></div>

        <div class="quiz-q"><h4>2) REM sleep is strongly linked with:</h4>
          <label><input type="radio" name="s2" value="emotion"> Emotion processing & creative linking</label><br>
          <label><input type="radio" name="s2" value="breathing"> Basic breathing control</label><br>
          <label><input type="radio" name="s2" value="nothing"> No role in learning</label><br>
          <label><input type="radio" name="s2" value="onlyfacts"> Fact memorization only</label>
          <div class="result" data-for="s2"></div></div>

        <div class="quiz-q"><h4>3) The circadian clock is mainly set by:</h4>
          <label><input type="radio" name="s3" value="light"> Light cues</label><br>
          <label><input type="radio" name="s3" value="protein"> Protein intake</label><br>
          <label><input type="radio" name="s3" value="exercise"> Exercise timing only</label><br>
          <label><input type="radio" name="s3" value="noise"> Ambient noise level</label>
          <div class="result" data-for="s3"></div></div>

        <div class="quiz-q"><h4>4) A good habit to help sleep and memory is to:</h4>
          <label><input type="radio" name="s4" value="consistent"> Keep a consistent schedule</label><br>
          <label><input type="radio" name="s4" value="latecafe"> Drink caffeine late</label><br>
          <label><input type="radio" name="s4" value="brightnight"> Use bright screens in bed</label><br>
          <label><input type="radio" name="s4" value="random"> Change bedtime daily</label>
          <div class="result" data-for="s4"></div></div>

        <div class="quiz-q"><h4>5) Short naps:</h4>
          <label><input type="radio" name="s5" value="help"> Can boost performance but don’t replace a night’s sleep</label><br>
          <label><input type="radio" name="s5" value="replace"> Fully replace night sleep</label><br>
          <label><input type="radio" name="s5" value="harm"> Always harm memory</label><br>
          <label><input type="radio" name="s5" value="none"> Have no effect on learning</label>
          <div class="result" data-for="s5"></div></div>

        <div class="q-actions"><button class="btn" type="submit">Check answers</button>
          <button class="btn secondary" type="button" data-reset="q_sleep">Reset</button></div>
        <p class="small">Best score: <span data-best="q_sleep">—</span></p>
      </form>
    </div>
  </section>

  <!-- ========== FLASHCARDS (full set) ========== -->
  <section id="flash">
    <div class="card">
      <h3>Flashcards</h3>
      <div id="fc" class="row"></div>
      <p class="small">Click a card to flip.</p>
    </div>
  </section>

  <!-- ========== INTERACTIVE BRAIN MAP (cortex click = silhouette; outlined stem) ========== -->
  <section id="interactive">
    <div class="card">
      <h3>Interactive brain map</h3>
      <div class="diagram">
        <svg viewBox="0 0 640 360" width="100%" height="340" aria-label="brain diagram">
          <!-- brain silhouette is cortex click target (painted first so lobes stay clickable) -->
          <a href="javascript:void(0)" data-part="Cerebral cortex: outer mantle for thinking, perception, and voluntary action">
            <path d="M130 210c-35-20-48-70-20-104 22-27 63-40 105-35 10-28 54-41 90-27 28-43 129-21 142 34 54 0 92 38 88 88-3 39-34 66-76 68-4 21-24 39-53 44-18 3-35 1-48-5-20 22-60 29-92 14-12 34-73 31-98-3-39 3-65-14-70-34z"
                  fill="#0f2b38" stroke="#1a4656" stroke-width="2"/>
          </a>
          <!-- lobes / parts (render on top, still clickable) -->
          <a href="javascript:void(0)" data-part="Frontal lobe: planning, decisions, speech (Broca’s)">
            <ellipse cx="250" cy="145" rx="90" ry="70" fill="#103443" stroke="#1a4656"/>
          </a>
          <a href="javascript:void(0)" data-part="Parietal lobe: touch, spatial maps, attention">
            <ellipse cx="330" cy="115" rx="85" ry="60" fill="#0f3749" stroke="#1a4656"/>
          </a>
          <a href="javascript:void(0)" data-part="Temporal lobe: hearing, language, memory">
            <ellipse cx="330" cy="210" rx="110" ry="70" fill="#0c3040" stroke="#1a4656"/>
          </a>
          <a href="javascript:void(0)" data-part="Occipital lobe: vision processing">
            <ellipse cx="430" cy="160" rx="70" ry="55" fill="#0d2a39" stroke="#1a4656"/>
          </a>
          <a href="javascript:void(0)" data-part="Hippocampus: forms new episodic memories">
            <circle cx="315" cy="190" r="13" fill="#2ee6b5"/>
          </a>
          <a href="javascript:void(0)" data-part="Amygdala: detects threat/emotion quickly">
            <circle cx="350" cy="200" r="11" fill="#f87171"/>
          </a>
          <a href="javascript:void(0)" data-part="Cerebellum: balance & timing">
            <ellipse cx="500" cy="230" rx="60" ry="40" fill="#103443" stroke="#1a4656"/>
          </a>
          <!-- brainstem: rounded rect with outline for visibility -->
          <a href="javascript:void(0)" data-part="Brainstem: breathing, heart rate, arousal">
            <rect x="298" y="245" width="24" height="44" rx="8" ry="8" fill="#123040" stroke="#1a4656" stroke-width="2"/>
          </a>
        </svg>
        <div class="info" id="brainInfo">Click a region to learn more.</div>
      </div>
    </div>
  </section>

  <!-- ========== RESOURCES (nicer summaries) ========== -->
  <section id="resources">
    <div class="grid">
      <div class="card span-12">
        <h3>Quick summaries</h3>
        <div class="res-grid">
          <div class="card res-col">
            <h4>Parts of the brain</h4>
            <p>Frontal (plan/speak), Parietal (touch/space), Temporal (hearing/lang/memory), Occipital (vision), plus Hippocampus, Amygdala, Cerebellum, Brainstem.</p>
            <a class="btn" href="#quiz" data-quiz="parts">Practice quiz</a>
          </div>
          <div class="card res-col">
            <h4>Memory types</h4>
            <p>Working holds info briefly; Episodic = events; Semantic = facts; Procedural = skills. Sleep & retrieval strengthen them.</p>
            <a class="btn" href="#quiz" data-quiz="memory">Practice quiz</a>
          </div>
          <div class="card res-col">
            <h4>Neurotransmitters</h4>
            <p>Dopamine (motivation/reward), Serotonin (mood/sleep), ACh (attention/learning), GABA (inhibition).</p>
            <a class="btn" href="#quiz" data-quiz="nt">Practice quiz</a>
          </div>
          <div class="card res-col">
            <h4>Sleep</h4>
            <p>Deep NREM stabilizes memories; REM links ideas & emotion. Keep a consistent schedule; light sets your 24-hour clock.</p>
            <a class="btn" href="#quiz" data-quiz="sleep">Practice quiz</a>
          </div>
        </div>
      </div>

      <div class="card span-12">
        <h3>Extra practice</h3>
        <ol class="small" style="font-size:13.5px;line-height:1.7">
          <li>Which lobe is most involved in impulse control and planning? <i>(Frontal)</i></li>
          <li>Which habit after studying most improves long-term recall? <i>(Sleep + spaced retrieval)</i></li>
          <li>Anxiolytics that potentiate which transmitter increase inhibition? <i>(GABA)</i></li>
          <li>Which memory stores the fact that Paris is the capital of France? <i>(Semantic)</i></li>
          <li>Which sleep stage is tied to creative recombination? <i>(REM)</i></li>
          <li>Working memory primarily holds information for… <i>(seconds)</i></li>
          <li>Damage to the hippocampus would most affect… <i>(forming new episodic memories)</i></li>
          <li>Acetylcholine in cortex tends to boost… <i>(attention & learning)</i></li>
          <li>The cerebellum best supports… <i>(timing and fine motor control)</i></li>
          <li>Parietal lobe maps help you… <i>(judge location and spatial relations)</i></li>
        </ol>
        <h4>Short answer</h4>
        <ol class="small" style="font-size:13.5px;line-height:1.7">
          <li>Explain how NREM and REM sleep each support learning in different ways.</li>
          <li>Give an example where dopamine prediction error might speed up learning.</li>
        </ol>
      </div>
    </div>
  </section>

  <!-- ========== ABOUT ========== -->
  <section id="about">
    <div class="card">
      <h3>About</h3>
      <div class="row" style="align-items:flex-start">
        <img src="/profile.jpg" alt="Your photo" style="width:120px;height:120px;border-radius:16px;border:1px solid var(--border);background:#0c2130;object-fit:cover">
        <div>
          <p class="small"><b>Hi there!</b> My name is <b>Sambith Manohar-Reddy</b> and I’m a student passionate about the brain. I’m a visual learner, which is why I built this site for other students to use while learning about the nervous system. I hope you find it helpful!</p>
          <p class="small"><b>Contact:</b> (512) 808-7438 · sambithmanoharreddy@gmail.com</p>
        </div>
      </div>
      <h4 style="margin-top:12px">All reviews</h4>
      <div id="aboutReviews" class="reviews-wrap"></div>
    </div>
  </section>
</main>



<!-- ↓↓↓ Paste this whole block right ABOVE </body> ↓↓↓ -->
<style>
  /* Footer layout & spacing */
  .site-footer{
    border-top:1px solid rgba(255,255,255,.08);
    margin-top:24px;
    padding:16px 0;
    font-size:.95rem;
  }
  .footer-wrap{
    display:flex;
    align-items:center;
    justify-content:space-between;
    flex-wrap:wrap;
    gap:10px 24px; /* row x column gap */
  }
  .foot-item{ line-height:1.4; }

  /* Middle links + contact */
  .foot-nav{
    display:flex;
    align-items:center;
    flex-wrap:wrap;
    gap:12px 16px;
  }
  .foot-nav a{
    text-decoration:none;
  }
  .foot-nav a + a::before{
    content:"•";
    margin:0 8px 0 4px;
    opacity:.5;
  }

  /* License row */
  .foot-license{
    display:flex;
    align-items:center;
    gap:10px;
  }
  .foot-license img{
    height:22px; width:auto; vertical-align:text-bottom;
  }

  /* Mobile */
  @media (max-width: 720px){
    .footer-wrap{ justify-content:center; text-align:center; }
    .foot-license{ justify-content:center; }
    .foot-nav{ justify-content:center; }
  }
</style>

<footer class="site-footer">
  <div class="container footer-wrap">
    <span class="foot-item">© <span id="year"></span> Brain Explorer</span>

    <nav class="foot-item foot-nav">
      <a href="#about">About</a>
      <a href="#resources">Resources</a>
      <span>Contact: (512) 808-7438 · sambithmanoharreddy@gmail.com</span>
    </nav>

    <div class="foot-item foot-license">
      <a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" aria-label="Creative Commons BY-NC 4.0 License">
        <img src="https://licensebuttons.net/l/by-nc/4.0/88x31.png" alt="CC BY-NC 4.0">
      </a>
      <span>Except where noted, content licensed under
        <a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a>.
      </span>
    </div>
  </div>
</footer>

<script>
  // Set year
  document.getElementById('year').textContent = new Date().getFullYear();
</script>
<!-- ↑↑↑ End footer block ↑↑↑ -->



<script>
/* ---------- tabs / routing ---------- */
const tabs=[...document.querySelectorAll('.tab-btn')];
const sections=[...document.querySelectorAll('main section')];
function show(tab){sections.forEach(s=>s.style.display=s.id===tab?'block':'none');tabs.forEach(b=>b.classList.toggle('active',b.dataset.tab===tab));if(location.hash!=='#'+tab){history.replaceState(null,'','#'+tab)}}
tabs.forEach(b=>b.addEventListener('click',()=>show(b.dataset.tab)));
  // Make the big "Start learning" / "Try a quiz" buttons work
document.querySelectorAll('[data-nav]').forEach(b => {
  b.addEventListener('click', () => show(b.dataset.nav));
});

function initRoute(){const t=(location.hash||'#home').slice(1);show(sections.some(s=>s.id===t)?t:'home')}
window.addEventListener('hashchange',initRoute);

/* ---------- daily facts ---------- */
const DAILY_FACTS={0:["The brain itself has no pain receptors—surgeons can operate on awake patients.","Signals in myelinated axons can reach ~120 m/s (≈270 mph).","Your brain briefly suppresses vision during saccades to prevent blur."],1:["Smell has a direct route to memory centers, bypassing the thalamus.","Infant brains burn more glucose than adult brains while wiring connections.","The cortical ‘homunculus’ gives hands/lips huge real estate."],2:["London taxi drivers show larger posterior hippocampi from navigation practice.","Some people experience synesthesia—letters or sounds trigger colors/tastes.","Your brain ‘fills in’ the blind spot where the optic nerve exits."],3:["During REM sleep, your muscles are paralyzed to prevent acting out dreams.","Reading Braille can activate visual cortex in blind readers.","Two sounds within ~30 ms can fuse into one."],4:["A neuron can make thousands of synapses; connections likely exceed 100 trillion.","Hippocampal ‘place cells’ fire like an internal GPS.","Pupils change with effort and surprise, not just light."],5:["You can’t tickle yourself—cerebellum cancels predicted touch.","The brain uses ~20% of resting energy though only ~2% of body weight.","Mirror neurons may aid learning-by-watching and empathy."],6:["Language tends to be left-dominant; prosody/music often right-leaning.","Your brain predicts the next sound; surprises spike activity.","Motion aftereffect: stare at a waterfall, then walls seem to drift up."]};
(function facts(){const d=new Date().getDay();const items=DAILY_FACTS[d]||[];const ul=document.getElementById('factsList');const stamp=document.getElementById('factsStamp');if(ul) ul.innerHTML=items.map(f=>`<li>${f}</li>`).join('');if(stamp){const names=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];stamp.textContent=`Auto-rotates daily • ${names[d]}`}})();

/* ---------- Flashcards data ---------- */
const fcData=[
  {front:'Frontal lobe',back:'Planning, decisions, speech (Broca’s).'},
  {front:'Parietal lobe',back:'Touch, spatial maps, attention.'},
  {front:'Temporal lobe',back:'Hearing, language, memory.'},
  {front:'Occipital lobe',back:'Vision processing.'},
  {front:'Hippocampus',back:'Forms new episodic memories.'},
  {front:'Amygdala',back:'Rapid threat/emotion detection.'},
  {front:'Cerebellum',back:'Balance, timing, fine movement.'},
  {front:'Brainstem',back:'Breathing, heart rate, arousal.'},
  {front:'Working memory',back:'Short-term mental workspace.'},
  {front:'Episodic memory',back:'Events with time/place.'},
  {front:'Semantic memory',back:'Facts & meanings.'},
  {front:'Procedural memory',back:'Skills & habits.'},
  {front:'Dopamine',back:'Motivation, reward prediction error.'},
  {front:'Serotonin',back:'Mood, sleep, appetite.'},
  {front:'Acetylcholine',back:'Attention & learning.'},
  {front:'GABA',back:'Main inhibitory transmitter.'},
  {front:'NREM sleep',back:'Stabilizes & consolidates memories.'},
  {front:'REM sleep',back:'Links ideas & processes emotion.'},
  {front:'Circadian rhythm',back:'~24h clock set mainly by light.'},
  {front:'Melatonin',back:'Darkness signal for sleepiness.'}
];

/* teaser (backs perfectly centered) */
function renderTeaser(){
  const el=document.getElementById('teaser'); if(!el) return;
  const sample=[...fcData].sort(()=>Math.random()-0.5).slice(0,3);
  el.innerHTML='';
  sample.forEach(it=>{
    const c=document.createElement('div'); c.className='miniCard';
    const set = txt => c.innerHTML = `<div>${txt}</div>`;
    let flip=false; set(it.front);
    c.onclick=()=>{flip=!flip; set(flip?it.back:it.front);};
    el.appendChild(c);
  });
}
document.getElementById('shuffleTeaser')?.addEventListener('click',renderTeaser);

/* full flashcards (center both sides) */
const fcWrap=document.getElementById('fc');
function renderFC(){
  if(!fcWrap) return; fcWrap.innerHTML='';
  fcData.forEach(it=>{
    const d=document.createElement('div');
    d.className='card span-3 fc-card';
    let front=true;
    const set = txt => d.innerHTML = `<h4 style="margin:0">${txt}</h4>`;
    set(it.front);
    d.onclick=()=>{front=!front; set(front?it.front:it.back);};
    fcWrap.appendChild(d);
  });
}

/* ---------- Learn: quiz links ---------- */
document.querySelectorAll('[data-quiz]').forEach(b=>b.addEventListener('click',()=>{show('quiz');switchQuiz(b.dataset.quiz);}))

/* ---------- Quizzes ---------- */
const tabsQ=[...document.querySelectorAll('[data-qtab]')];
function switchQuiz(key){tabsQ.forEach(t=>t.classList.toggle('active',t.dataset.qtab===key));['q_parts','q_memory','q_nt','q_sleep'].forEach(id=>document.getElementById(id).style.display=(id==='q_'+key?'block':'none'))}
tabsQ.forEach(t=>t.addEventListener('click',()=>switchQuiz(t.dataset.qtab)));

const ANSWERS={
  q_parts:{p1:'Occipital',p2:'New memories',p3:'Brainstem',p4:'Temporal',p5:'Cerebellum'},
  q_memory:{m1:'workspace',m2:'events',m3:'bike',m4:'spacing',m5:'facts'},
  q_nt:{n1:'GABA',n2:'ACh',n3:'Dopamine',n4:'GABA',n5:'Serotonin'},
  q_sleep:{s1:'stabilize',s2:'emotion',s3:'light',s4:'consistent',s5:'help'}
};
document.querySelectorAll('.qform').forEach(form=>{
  form.addEventListener('submit',e=>{
    e.preventDefault(); let score=0;
    Object.entries(ANSWERS[form.id]).forEach(([name,ans])=>{
      const chosen=form.querySelector(`input[name="${name}"]:checked`);
      const box=form.querySelector(`.result[data-for="${name}"]`);
      if(!chosen){box.textContent='Pick an answer';box.style.color='#f59e0b';return;}
      if(chosen.value===ans){score++; box.textContent='Correct!';box.style.color='#2ee6b5'}
      else{box.textContent='Correct: '+ans;box.style.color='#f87171'}
    });
    const bestKey='best_'+form.id; const prev=+localStorage.getItem(bestKey)||0;
    if(score>prev) localStorage.setItem(bestKey,String(score));
    const best=document.querySelector(`[data-best="${form.id}"]`);
    if(best) best.textContent=(localStorage.getItem(bestKey)||score)+'/'+Object.keys(ANSWERS[form.id]).length;
  });
  const reset=document.querySelector(`[data-reset="${form.id}"]`);
  if(reset) reset.onclick=()=>{form.reset();form.querySelectorAll('.result').forEach(r=>r.textContent='')};
});

/* ---------- Interactive brain info ---------- */
document.querySelectorAll('svg a').forEach(a=>{
  a.addEventListener('click',()=>{document.getElementById('brainInfo').textContent=a.getAttribute('data-part')})
});

/* ---------- Reviews (Cloudflare D1 via Pages Functions) ---------- */
async function api(path, opts = {}) {
  const res = await fetch(path, {
    headers: { 'Content-Type': 'application/json' },
    ...opts,
  });
  if (!res.ok) throw new Error(await res.text());
  return res.json();
}

function escapeHtml(s){
  return String(s ?? '').replace(/[&<>"]/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[m]));
}

function reviewEl(r){
  const d = document.createElement('div');
  d.className = 'review';
  const when = new Date(r.created_at).toLocaleString();
  d.innerHTML = `
    <p class="review-text">${escapeHtml(r.text)}</p>
    <small class="review-meta">— ${escapeHtml(r.name || 'Anonymous')} • ${when}</small>
  `;
  return d;
}

async function renderReviews(){
  const home = document.getElementById('homeReviews');
  const about = document.getElementById('aboutReviews');
  const HOME_COUNT = 3; // show 3 on Home

  // show a gentle loading message if empty
  if (home && !home.children.length) home.innerHTML = '<div class="state">Loading reviews…</div>';
  if (about && !about.children.length) about.innerHTML = '<div class="state">Loading reviews…</div>';

  try {
    const { items } = await api('/api/reviews?limit=200');

    if (home){
      home.innerHTML = '';
      const subset = items.slice(0, HOME_COUNT);
      subset.forEach(r => home.appendChild(reviewEl(r)));
      if (!subset.length) home.innerHTML = '<div class="state">No reviews yet. Be the first!</div>';
    }

    if (about){
      about.innerHTML = '';
      items.forEach(r => about.appendChild(reviewEl(r)));
      if (!items.length) about.innerHTML = '<div class="state">No reviews yet.</div>';
    }
  } catch (err){
    console.error(err);
    if (home) home.innerHTML = '<div class="state">Could not load reviews.</div>';
    if (about) about.innerHTML = '<div class="state">Could not load reviews.</div>';
  }
}

document.getElementById('reviewForm')?.addEventListener('submit', async (e) => {
  e.preventDefault();
  const name = document.getElementById('revName')?.value.trim();
  const text = document.getElementById('revText')?.value.trim();
  if (!text){ alert('Please write a short review.'); return; }

  try {
    await api('/api/reviews', {
      method: 'POST',
      body: JSON.stringify({ name: name || 'Anonymous', text })
    });
    e.target.reset?.();
    await renderReviews();
  } catch (err){
    console.error(err);
    alert('Sorry—could not post the review.');
  }
});


/* ---------- init ---------- */
document.getElementById('year').textContent=new Date().getFullYear();
initRoute(); renderTeaser(); renderFC(); renderReviews();
</script>
</body>
</html>
